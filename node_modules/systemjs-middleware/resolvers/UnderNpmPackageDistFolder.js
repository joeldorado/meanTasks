"use strict";
var configurator = require("../core/config");
var helpers_1 = require("./helpers");
var fs_1 = require("../helpers/fs");
var config = configurator.get();
var ResolverUnderNpmPackageDistFolder = (function () {
    function ResolverUnderNpmPackageDistFolder() {
    }
    Object.defineProperty(ResolverUnderNpmPackageDistFolder.prototype, "name", {
        get: function () {
            return "underNpmPackageDistFolder";
        },
        enumerable: true,
        configurable: true
    });
    ResolverUnderNpmPackageDistFolder.prototype.resolve = function (fileName, logger) {
        return Promise.resolve().then(function () {
            if (!helpers_1.isValidNpmPackageName(fileName)) {
                logger.log("SKIP underNpmPackageDistFolder lookup since " + fileName + " is not considered a file name");
                return Promise.resolve("");
            }
            var packageName = fileName;
            var distFolder = "node_modules/" + packageName + "/dist";
            return fs_1.directoryExists(distFolder).then(function (exists) {
                if (!exists) {
                    logger.log("NOT FOUND " + distFolder);
                    return "";
                }
                return helpers_1.resolveWithExtensions(distFolder + "/" + packageName, config.defaultExtensions, logger);
            });
        });
    };
    return ResolverUnderNpmPackageDistFolder;
}());
exports.ResolverUnderNpmPackageDistFolder = ResolverUnderNpmPackageDistFolder;
